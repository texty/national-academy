<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://fonts.googleapis.com/css?family=Anonymous+Pro|Cormorant+Garamond|Exo+2|Marmelad|Philosopher|Poiret+One|Source+Sans+Pro" rel="stylesheet">    <link rel="stylesheet" href = css/styles.css>



</head>

<body>
<h1>Національна Академія Наук у цифрах</h1>
<h3> Lorem ipsum, ligula adipiscing ut, sagittis orci urna eget eros vivamus nulla lorem ultricies urna, sit justo odio fusce nibh urna auctor in auctor malesuada. Fusce nam quam sagittis gravida, auctor leo eget ut, lectus odio at elementum nec pellentesque nam, proin risus, mattis sodales. Non diam maecenas sapien vivamus nec, sapien auctor magna enim porttitor sit elementum ultricies auctor.</h3>




<div class="content">


    <div id="scroll">
        <div id="step1" class="step">
        <h2>Структурні частки окремих вікових груп серед дослідників НАНУ</h2>
       <p>Середній вік працівників НАНУ продовжує зростати. Протягом останніх 10 років кількість дослідників у віці понад 65 років зросла майже вдвічі, а кількість молодих вчених помітно впала. Повʼязана стаття за <a href="http://texty.org.ua/pg/article/editorial/read/82121/Zombiakademija_vchenipensionery_NAN_Ukrajiny_ne_vytrymujut_konkurenciji" target="_blank">лінком.</a></p>
            <button><a href="#step2" id="toStep2">Далі</a></button>
        </div>

    <div id="step2" class="step">
        <h2>Чисельність дослідників НАНУ за статями</h2>
        <p>В закладах НАНУ дослідників більше ніж дослідниць. З чим це повʼязано (коментар Булкіна)</p>
        <button><a href="#step3" id="toStep3">Далі</a></button>

    </div>

<div id="step3" class="step">
        <h2>Кількість дослідників і дослідниць у закладах НАНУ (2015 р.)</h2>
        <p>Як видно з графіку, чоловіки переважають у великих закладах НАНУ. Пропонуємо Вам дослідити скільки дослідників і дослідниць працює в тому чи чи іншому закладі. Наведіть мишею на будь-яку точку і Ви побачите назву закладу і гендерний розподіл працівників-науковців. </p>
    <button><a href="#step4" id="toStep4">Наблизити</a></button>

</div>

<div id="step4" class="step">
    <h2>Кількість дослідників і дослідниць у закладах НАНУ (2015 р.)</h2>
        <p>Тепер на графіку відображені лише заклади, що мають не більше 100 науковців. В маленьких закладах жінки і чоловіки представлені більш рівномірно.</p>
    <button><a href="#step5" id="toStep5">Далі</a></button>
    <button><a href="#step3" id="backtoStep3">Віддалити</a></button>
</div>

<div id="step5" class="step">
            <h2>Співвідношення теоретичних і прикладних досліджень у закладах НАНУ (2015 р.)</h2>
            <p> Lorem ipsum, ligula adipiscing ut, sagittis orci urna eget eros vivamus nulla lorem ultricies urna, sit justo odio fusce nibh urna auctor in auctor malesuada. Fusce nam quam sagittis gravida.</p>
            <button onclick="showFinance()">Фінансування</button>
            <button><a href="#step6" id="toStep6">Далі</a></button>
</div>



        <div id="step6" class="step">
        <h2>Кількість теоретичних і прикладних досліджень у закладах НАНУ</h2>
        <p> Всі заклади НАНУ можна поділити на чотири категорії за сферою діяльності (природничі, технічні, соціальні, гуманітарні. </p>
        <button onclick="window.location.reload(false);"><a href="#step1" id="backtoStep1">To step 1</a></button>


</div>
    </div>

    <div id="charts">
        <!--<button style="margin-left: 50px" onclick="updateData()">scrollytelling step 2</button>-->
        <!--<button style="margin-left: 50px" onclick="scatter()">scrollytelling step 3</button>-->
        <!--<button id="scatterSmall" style="margin-left: 50px; display:none" onclick="">Наблизити</button>-->




        <div id="age-chart"></div>

    </div>



</div>

<div id="myModal" class="modal">
    <!-- Modal content -->
    <div class="modal-content">
        <span class="close">&times;</span>
        <button onclick="totalFinance()">Загальне фінансування</button>
        <button onclick="perPersonFinance()">Питоме фінансування</button>
        <button onclick="foreignFinance()">Іноземні вкладення</button>


    </div>
</div>



<!--<div id="gender-scatter"></div>-->
<!-- Libraries -->
<script src="lib/jquery-2.1.4.min.js"></script>
<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="lib/d3-ring-note.js"></script>

<!-- Local scripts -->
<script src="js/finance.js"></script>
<script src="js/age.js"></script>
<script src="js/genderScatter.js"></script>
<script src="js/scatterUpdate.js"></script>







<script>

    var modal = document.getElementById('myModal');
    var span = document.getElementsByClassName("close")[0];

    function showFinance(){
        d3.select(".modal").style("opacity", "1").style("pointer-events", "all")
    }



//        modal.style.display = "block";
        span.onclick = function () {
            d3.select(".modal").style("opacity", "0").style("pointer-events", "none")
        };
//        window.onclick = function (event) {
//            if (event.target == modal) {
//                modal.style.display = "none";
//            }
//        };



    function eventFire(el, etype){
        if (el.fireEvent) {
            el.fireEvent('on' + etype);
        } else {
            var evObj = document.createEvent('Events');
            evObj.initEvent(etype, true, false);
            el.dispatchEvent(evObj);
        }
    }

    eventFire(span, 'click');

    var durationTime = 750;


    var div = d3.select("body").append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);

    function isInView(elem){
        return $(elem).offset().top - $(window).scrollTop() < $(elem).height() ;
    }

    $("#toStep2").on("click",function(){
        if (isInView($('#step2'))) {
            //fire whatever you what
            updateData()
        }
    });


    $("#scroll").scroll(function(){
        if (isInView($('#step2'))) {
            //fire whatever you what
            updateData()
        }
    });

    $("#scroll").scroll(function(){
        if (isInView($('#step3'))) {
            //fire whatever you what
            scatter();
            d3.select("#scatterSmall").attr("display", "block")
        }
        else {
            d3.select("#scatterSmall").attr("display", "none")
        }

    });

    $("#scroll").scroll(function(){
        if (isInView($('#step4'))) {
            //fire whatever you what
            scatterSmall();
        }
    });










</script>

</body>
</html>

