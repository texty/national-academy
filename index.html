<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://fonts.googleapis.com/css?family=Alegreya+Sans|Cormorant|Cormorant+Garamond|EB+Garamond|PT+Mono|Podkova|Poiret+One|Rubik|Ubuntu" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Anonymous+Pro|Exo+2|IBM+Plex+Sans|Jura|Marmelad|Noto+Sans|Open+Sans|PT+Sans+Caption|Play|Roboto|Source+Sans+Pro" rel="stylesheet">

    <link rel="stylesheet" href=css/styles.css>

</head>

<body>
<h1>Національна Академія Наук у цифрах</h1>
<h3>За 10 років кількість дослідників НАН України у віці понад 65 років зросла вдвічі. Чи не єдиним закладом НАНУ, де жінки кількісно значно переважають чоловіків є бібліотека ім. Вернадскього. Тексти продовжують досліджувати, яким чином вікові, гендерні та фінансові питання НАНУ впливають на якість науки в країні. На цей раз ми візуалізували дослідження науковця Ігоря Булкіна про гендерний та віковий розподіл закладів НАНУ протягом 2006-2017 рр., а також дані про фінансування закладів НАНУ у 2015 р.</h3>


<div class="content">

    <div id="scroll">
        <div id="step1" class="step">
            <h2>Структурні частки окремих вікових груп серед дослідників НАНУ</h2>
            <p>Середній вік працівників НАНУ продовжує зростати. Протягом останніх 10 років кількість дослідників у віці
                понад 65 років зросла майже вдвічі, а кількість молодих вчених помітно впала. Повʼязана стаття за <a
                        href="http://texty.org.ua/pg/article/editorial/read/82121/Zombiakademija_vchenipensionery_NAN_Ukrajiny_ne_vytrymujut_konkurenciji"
                        target="_blank">лінком.</a></p>
            <a class='fa' href="#step2" id="toStep2">
                <svg class='fa blink' width='50' height="50" viewBox="0 0 1000 1000">
                    <g>
                        <path d="M500,755.9L14.7,270.6c-6.2-6.2-6.2-15.6,0-21.8c6.2-6.2,15.6-6.2,21.8,0L500,712.3l463.6-463.6c6.2-6.2,15.6-6.2,21.8,0c6.2,6.2,6.2,15.6,0,21.8L500,755.9z"/>
                    </g>
                </svg>
            </a>
            <div id="chart1"></div>
        </div>


        <div id="step2" class="step">
            <h2>Чисельність дослідників НАНУ за статями</h2>
            <p>В закладах НАНУ дослідників більше ніж дослідниць. Як пояснює, Ігор Булкін, до 2015 року включно відбувалася млява демаскулінізація НАН, але в 2016-2017 роках так звана оптимізація персоналу вдарила більше саме по дослідницям і значення ч/ж знов почало зростати.</p>
            <a class='fa' href="#step3" id="toStep3"> <svg class='fa' width='50' height="50" viewBox="0 0 1000 1000">
                <g>
                    <path d="M500,755.9L14.7,270.6c-6.2-6.2-6.2-15.6,0-21.8c6.2-6.2,15.6-6.2,21.8,0L500,712.3l463.6-463.6c6.2-6.2,15.6-6.2,21.8,0c6.2,6.2,6.2,15.6,0,21.8L500,755.9z"/>
                </g>
            </svg></a>
            <div id="chart2"></div>
        </div>

        <div id="step3" class="step">
            <h2>Кількість дослідників і дослідниць у закладах НАНУ (2015 р.)</h2>
            <p>Як видно з графіку, чоловіки переважають у великих закладах НАНУ. Пропонуємо Вам дослідити скільки
                дослідників і дослідниць працює в тому чи чи іншому закладі. Наведіть мишею на будь-яку точку і Ви
                побачите назву закладу і гендерний розподіл працівників-науковців. <span style="color:#85a8d0;">Блакитна</span> точка означає, що в закладі більше чоловіків, <span style="color:#e377c2">рожева</span>  - жінок</p>
            <a class="fa" href="#step4" id="toStep4"><svg  class='fa' width='50' height="50" viewBox="0 0 1000 1000">
                <g>
                    <path d="M500,755.9L14.7,270.6c-6.2-6.2-6.2-15.6,0-21.8c6.2-6.2,15.6-6.2,21.8,0L500,712.3l463.6-463.6c6.2-6.2,15.6-6.2,21.8,0c6.2,6.2,6.2,15.6,0,21.8L500,755.9z"/>
                </g>
            </svg></a>
            <div id="chart3"></div>
        </div>

        <div id="step4" class="step">
            <h2>Кількість дослідників і дослідниць у закладах НАНУ (2015 р.)</h2>
            <p>Тепер на графіку відображені лише заклади, що мають не більше 100 науковців. В маленьких закладах жінки і
                чоловіки представлені більш рівномірно.</p>
            <a class="fa"  href="#step5"><svg  class='fa' width='50' height="50" viewBox="0 0 1000 1000">
                <g>
                    <path d="M500,755.9L14.7,270.6c-6.2-6.2-6.2-15.6,0-21.8c6.2-6.2,15.6-6.2,21.8,0L500,712.3l463.6-463.6c6.2-6.2,15.6-6.2,21.8,0c6.2,6.2,6.2,15.6,0,21.8L500,755.9z"/>
                </g>
            </svg></a>
            <div id="chart4"></div>
        </div>

        <div id="step5" class="step">
            <h2>Віковий розподіл по закладах (2015 р.)</h2>
            <p>А тепер пропонуємо Вам дослідити, в яких закладах переважають молоді вчені (до 50 років), а в яких похилого віку (від 50 років). <span style="color:#bcbd22;">Зелені</span> точки означають перевагу молодих вчених, <span style="color:#d62728">червоні</span>  - пенсіонерів</p></p>
            <a class="fa" href="#step6"><svg  class='fa' width='50' height="50" viewBox="0 0 1000 1000">
                <g>
                    <path d="M500,755.9L14.7,270.6c-6.2-6.2-6.2-15.6,0-21.8c6.2-6.2,15.6-6.2,21.8,0L500,712.3l463.6-463.6c6.2-6.2,15.6-6.2,21.8,0c6.2,6.2,6.2,15.6,0,21.8L500,755.9z"/>
                </g>
            </svg></a>
            <div id="chart5"></div>

        </div>


        <div id="step6" class="step">
            <h2>Віковий розподіл по закладах (2015 р.)</h2>
            <p>Ситуація з віковим розподілом така сама як і з гендерним, в маленьких закладах кількість вчених до 50 і після 50 років приблизно однакова. В той час як у великих переважають пенсіонери.</p>
            <a class="fa" onclick="showFinance()" href="#insert"><svg  class='fa' width='50' height="50" viewBox="0 0 1000 1000">
                <g>
                    <path d="M500,755.9L14.7,270.6c-6.2-6.2-6.2-15.6,0-21.8c6.2-6.2,15.6-6.2,21.8,0L500,712.3l463.6-463.6c6.2-6.2,15.6-6.2,21.8,0c6.2,6.2,6.2,15.6,0,21.8L500,755.9z"/>
                </g>
            </svg></a>
            <div id="chart6"></div>

        </div>

    </div>

    <div id="charts">
        <!--<button style="margin-left: 50px" onclick="updateData()">scrollytelling step 2</button>-->
        <!--<button style="margin-left: 50px" onclick="scatter()">scrollytelling step 3</button>-->
        <!--<button id="scatterSmall" style="margin-left: 50px; display:none" onclick="">Наблизити</button>-->


        <div id="age-chart"></div>

    </div>


</div>
<div id="transition-div"></div>
<div id="financeChartsContainer">
    <h2>Фінансування</h2>
    <p>Заклади НАНУ можна поділити на чотири категорії за спеціалізаціє: природничі науки, технічні, гуманітарні і соціальні. Кожен з цих категорій має власну специфіку фінансування. У соціогуманітарних організаціях забезпечити високий рівень питомого фінансування легше через відсутність значних матеріальних витрат. А ось, наприклад, в Інституті проблем безпеки атомних електростанцій, що займає перше місце за питомим фінансуванням на робітникам, частка матеріальних витрат об'єктивно вища.

        <span style="color:orange;">Жовтим</span> кольором позначені ті заклади, що мають найбільше загальне фінансування. На графіку представлені заклади із загальною чисельністю робітників понад 100 осіб.</p>

    <div id="buttons">
        <button style="background-color: rgba(255, 165, 0, 0.32)" onclick="perPersonFinance()">Питоме фінансування</button>
        <button onclick="totalFinance()">Загальне фінансування</button>
        <button onclick="foreignFinance()">Іноземні вкладення</button>

    </div>
    <div id="insert">
    </div>
    <button onclick="window.location.reload(false);"><a href="#step1" id="backtoStep1">Повернутись на початок</a></button>


</div>

<div id="myModal" class="modal">
    <!-- Modal content -->
    <div class="modal-content">
        <span class="close">&times;</span>
        <button  onclick="perPersonFinance()">Питоме фінансування</button>
        <button onclick="totalFinance()">Загальне фінансування</button>
        <button onclick="foreignFinance()">Іноземні вкладення</button>


    </div>
</div>


<!--<div id="gender-scatter"></div>-->
<!-- Libraries -->
<script src="lib/jquery-2.1.4.min.js"></script>
<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="https://d3js.org/colorbrewer.v1.min.js"></script>

<script src="lib/d3-ring-note.js"></script>

<!-- Local scripts -->
<!--<script src="js/finance.js"></script>-->
<!--<script src="js/age.js"></script>-->
<!--<script src="js/genderScatter.js"></script>-->
<!--<script src="js/scatterUpdate.js"></script>-->
<!--<script src="js/mobile.js"></script>-->


<script>

    var body = document.getElementsByTagName('body')[0];
    var js0 = document.createElement("script");
    var js1 = document.createElement("script");
    var js2 = document.createElement("script");
    var js3 = document.createElement("script");
    var js4 = document.createElement("script");

    js0.type = "text/javascript";
    js1.type = "text/javascript";
    js2.type = "text/javascript";
    js3.type = "text/javascript";
    js4.type = "text/javascript";


    if (screen.width >= 800) {
        js0.src = "js/finance.js";
        js1.src = "js/age.js";
        js2.src = "js/genderScatter.js";
        js3.src = "js/scatterUpdate.js";


    }
    else if (screen.width < 800){
        js0.src = "js/mobile.js";
        js1.src = "js/finance.js";
        js2.src = "";
        js3.src = "";


    }
    body.appendChild(js0);
    body.appendChild(js1);
    body.appendChild(js2);
    body.appendChild(js3);

</script>




<script>

    var modal = document.getElementById('myModal');
    var span = document.getElementsByClassName("close")[0];

    function showFinance() {
//        d3.select(".modal").style("opacity", "1").style("pointer-events", "all")
        d3.select("#financeChartsContainer").style("display", "block");
        perPersonFinance()
    }


    //        modal.style.display = "block";
    span.onclick = function () {
        d3.select(".modal").style("opacity", "0").style("pointer-events", "none")
    };
    //        window.onclick = function (event) {
    //            if (event.target == modal) {
    //                modal.style.display = "none";
    //            }
    //        };


    function eventFire(el, etype) {
        if (el.fireEvent) {
            el.fireEvent('on' + etype);
        } else {
            var evObj = document.createEvent('Events');
            evObj.initEvent(etype, true, false);
            el.dispatchEvent(evObj);
        }
    }

    eventFire(span, 'click');

    var durationTime = 400;


    var div = d3.select("body").append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);

    function isInView(elem) {
        return $(elem).offset().top - $(window).scrollTop() < $(elem).height();
    }

    $("#toStep2").on("click", function () {
        if (isInView($('#step2'))) {
            updateData()
        }
    });

    $(window).scroll(function () {
        if (isInView($('#step1'))) {
            toStart();
            $("#bla").css("opacity","0");
            $("#age-chart").css("position", "relative")

        }
    });


    $(window).scroll(function () {
        if (isInView($('#step2'))) {
            updateData();
            $("#bla").css("opacity","0");
            $("#age-chart").css("position", "fixed").css("top", "0")

        }
    });

    $(window).scroll(function () {
        if (isInView($('#step3'))) {
            scatter();
            $("#scatterSmall").attr("display", "block");
            $(".dot").css("opacity","0.5");
            $("#bla").css("opacity","1");
        }
        else {
            d3.select("#scatterSmall").attr("display", "none")
        }

    });

    $(window).scroll(function () {
        if (isInView($('#step4'))) {
            scatterSmall();
        }
    });


    $(window).scroll(function () {
        if (isInView($('#step5'))) {
            scatterAge();

        }
    });

    $(window).scroll(function () {
        if (isInView($('#step6'))) {
            scatterAgeSmall();
            showFinance();
            $("#age-chart").css("position", "fixed");
//

        }
    });

    $(window).scroll(function () {
        if (isInView($('#transition-div'))) {
            $("#age-chart").css("position", "relative")

        }
    });

//    if (window.performance){
////        window.location.href = '#step1';
////        $("#scroll").scrollTop(0);
//
//    }

    window.onbeforeunload = function() {window.scrollTo(0,0);}

d3.selectAll("button").on("click", function(){

    d3.selectAll("button").style("background-color", "buttonface");
    d3.select(this).style("background-color", "rgba(255, 165, 0, 0.32)");


})
</script>

</body>
</html>

